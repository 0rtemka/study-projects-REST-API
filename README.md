# Учебное приложение для учета баллов студентов и их проектов в рамках проведения учебного предмета.

## Мотивация
Данное приложение было разработано, чтобы упростить процесс ведения баллов за учебные проекты студентов, а также процесс бронирования проектов студентами. До этого все взаимодействие происходило в общем чате группы, из-за чего часто возникали проблемы: несколько студентов взяли одну и ту же тему проекта, баллы за проект не были проставлены и т.д. Мое приложение должно решить эти проблемы.

## Технологии
Приложение написано на Java с использованием Spring Boot и следующих технологий:
- Spring MVC
- Spring Security
- Spring Data JPA
- Hibernate
- PostgreSQL
- Flyway
- JUnit

## Запуск
Для запуска потребуется:
1. СУБД **PostgreSQL**, установленная на вашем компьютере или развернутая в Docker
2. Переименовать файл **application.yaml.origin -> application.yaml** и указать данные для вашей БД в свойствах **spring.datasource.url/username/password**
3. Переименовать файл **application-test.yaml.origin -> application-test.yaml** и так же как и для предыдущего пункта указать данные для тестовой БД
4. После запуска можно поменять значение **jpa.hibernate.ddl-auto** на ***validate***, чтобы не создавать при каждом запуске таблицы, а лишь поддерживать имеющиеся 

## Взаимодействие 
Предполагается, что приложение запущено локально на порту 8080 (http://localhost:8080), поэтому убедитесь что это так, а иначе измените адрес или порт.
Также в приложении используется разделение пользователей по ролям на USER и ADMIN. При этом USER доступен базовый функционал по взаимодействию с приложением, а ADMIN кроме этого способен изменять сущности, удалять их.
Методы, которые доступны только пользователю ADMIN будут далее помечены **\[ADMIN\]**. Чтобы сделать пользователя админом, нужно вручную изменить его роль в БД.

### Регистрация
Чтобы пользоваться приложением, нужно пройти процедуру регистрации.

#### Адрес
`POST -> http://localhost:8080/api/auth/register`

##### Тело запроса
{
    "name": "",
    "email": "",
    "password": "",
    "group": "{IS/ISAS/CS}"
}

### Студенты

#### Адреса
- `GET -> http://localhost:8080/api/students` - получение всех студентов. Поддерживается указание параметров {**sortBy**} для сортировки данных, {**page**} и {**size**} для постраничного вывода, {**group**} для фильтрации по группам.
- `GET -> http://localhost:8080/api/students/{id}` - получение студента по id, где id - это число, уникальный идентификатор студента.
- `PUT [ADMIN] -> http://localhost:8080/api/students/{id}` - изменение студента по его id.
##### Тело запроса
{
    "name": "",
    "email": "",
    "mark": {1-15},
    "group": "{IS/ISAS/CS}"
}
- `DELETE [ADMIN] -> http://localhost:8080/api/students/{id}` - удаление студента по его id.
- `GET -> http://localhost:8080/api/students/{id}/projects` - получение проектов студента по его id. Поддерживается указание параметров {**status**} для фильтрации по следующих признакам: ***marked***(с оценкой), ***unmarked***(без оценки), ***active***(активный), ***inactive***(не активный, истек срок); 
{**page**} и {**size**} для постраничного вывода

### Темы для проектов

#### Адреса
- `GET -> http://localhost:8080/api/themes` - получение всех тем для проектов. Поддерживается указание параметров {**sortBy**} для сортировки данных, {**page**} и {**size**} для постраничного вывода, {**group**} для фильтрации по группам.
- `GET -> http://localhost:8080/api/themes/{id}` - получение темы проекта по id.
- `POST [ADMIN] -> http://localhost:8080/api/themes` - добавление новой темы.
##### Тело запроса
{
    "topic": "",
    "group": "{IS/ISAS/CS}"
}
- `PUT [ADMIN] -> http://localhost:8080/api/themes/{id}` - изменение темы по id.
##### Тело запроса
{
    "topic": "",
    "group": "{IS/ISAS/CS}"
}
- `DELETE [ADMIN] -> http://localhost:8080/api/themes/{id}` - удаление темы по id

### Проекты

#### Адреса
- `GET -> http://localhost:8080/api/projects` - получение всех проектов. Поддерживается указание параметров {**sortBy**} для сортировки данных, 
{**page**} и {**size**} для постраничного вывода, {**group**} для фильтрации по группам, а также {**status**} для фильтрации по следующих признакам: ***marked***(с оценкой), ***unmarked***(без оценки), ***active***(активный), ***inactive***(не активный, истек срок).
- `GET -> http://localhost:8080/api/projects/{id}` - получение проекта по id.
- `POST -> http://localhost:8080/api/projects/{themeId}` - бронирование студентом проекта с указанием id темы для проекта.
- `PUT [ADMIN] -> http://localhost:8080/api/projects/{projectId}` - оценивание проекта (выставление баллов) по id проекта.
##### Тело запроса
{
    "mark": {1-15}
}
- `DELETE [ADMIN] -> http://localhost:8080/api/projects/{id}` - удаление проекта по его id.